diff -Nur hostap-0.0.3/Makefile hostap-0.0.3.new/Makefile
--- hostap-0.0.3/Makefile	2003-05-18 05:51:59.000000000 +0200
+++ hostap-0.0.3.new/Makefile	2003-08-21 15:03:20.000000000 +0200
@@ -1,6 +1,6 @@
 # Edit this path to match with your system (it should point to the root
 # directory of the Linux kernel source)
-KERNEL_PATH=/usr/src/linux
+KERNEL_PATH=$(KERNEL_DIR)
 
 # Systems using external pcmcia-cs package (instead of kernel-tree pcmcia
 # modules):
@@ -9,9 +9,9 @@
 PCMCIA_PATH=
 
 # This path will be prepended to every installed file
-DESTDIR=
+DESTDIR=$(IMAGE_DIR)
 
-CC=gcc
+CC=$(CROSS_COMPILE)gcc
 CFLAGS=-O2 -D__KERNEL__ -DMODULE -Wall -g -c $(EXTRA_CFLAGS)
 
 include $(KERNEL_PATH)/.config
@@ -207,15 +207,15 @@
 	mkdir -p $(MODPATH_CS)
 	cp -f $(MSRC)/$(MODULE_CS) $(MODPATH_CS)
 ifndef DESTDIR
-	/sbin/depmod -ae
+	#/sbin/depmod -ae
 endif
 
 install_conf:
-	@if [ ! -r $(DESTDIR)/etc/pcmcia/hostap_cs.conf ]; then \
+	#@if [ ! -r $(DESTDIR)/etc/pcmcia/hostap_cs.conf ]; then \
 		echo "Installing $(DESTDIR)/etc/pcmcia/hostap_cs.conf"; \
 		cp -f driver/etc/hostap_cs.conf $(DESTDIR)/etc/pcmcia/hostap_cs.conf; \
 	fi
-	@if [ -r $(DESTDIR)/etc/pcmcia/prism2.conf ]; then \
+	#@if [ -r $(DESTDIR)/etc/pcmcia/prism2.conf ]; then \
 		echo "You may need to remove old $(DESTDIR)/etc/pcmcia/prism2.conf"; \
 	fi
 
