#
# For a description of the syntax of this configuration file,
# see Documentation/kbuild/config-language.txt.
#

mainmenu_name "linuxAP Configuration"

define_ustring CF_BASEDEV           /dev/sda
define_ustring CF_MOUNTPOINT        /mnt/cf

# Some version defines we may ask for at a later date
define_ustring BUSYBOX_VERSION      1.00-pre3
define_ustring BUTILS_VERSION       0.9.6
define_ustring CKERMIT_VERSION      206
define_ustring CIPE_VERSION         1.5.4
define_ustring CRAMFS_VERSION       1.1
define_ustring GLIBC_VERSION        2.2.5
define_ustring HOSTAP_VERSION       0.0.3
define_ustring IPROUTE2_VERSION     current
define_ustring IPTABLES_VERSION     1.2.7a
define_ustring KERNEL_AODV_VERSION  v2.1
define_ustring OPENVPN_VERSION      1.5-beta7
define_ustring PCMCIA_VERSION       3.2.3
define_ustring PSMISC_VERSION       21.2
define_ustring SYSLINUX_VERSION     2.00
define_ustring SYSVINIT_VERSION     2.83
define_ustring TINYLOGIN_VERSION    1.4
define_ustring UCLIBC_VERSION       0.9.20
define_ustring UDHCP_VERSION        0.9.8
define_ustring UMSDOS_VERSION       1.32
define_ustring WTOOLS_VERSION       25

define_bool CONFIG_BUSYBOX y
define_bool CONFIG_PCMCIA y
define_bool CONFIG_UDHCP n
define_bool CONFIG_WTOOLS y

if [ "$CONFIG_HOSTAP" = "" ]; then
    define_bool CONFIG_HOSTAP y
fi
if [ "$CONFIG_BUTILS" = "" ]; then
    define_bool CONFIG_BUTILS y
fi
if [ "$CONFIG_GLIBC" = "" -a "$CONFIG_UCLIBC" = "" ]; then
        define_bool CONFIG_UCLIBC y
fi
if [ "$CONFIG_WLSPD_SLOW" = "" -a \
    "$CONFIG_WLSPD_NORMAL" = "" -a \
    "$CONFIG_WLSPD_HYPER" = "" ]; then
        define_bool CONFIG_WLSPD_NORMAL y
fi
if [ "$CONFIG_WL11000" = "" -a \
    "$CONFIG_SOEKRIS" = "" -a \
    "$CONFIG_ITX" = "" ]; then
        define_bool CONFIG_SOEKRIS y
fi
if [ "$CONFIG_NBD" = "" ]; then
        define_bool CONFIG_NBD y
fi

mainmenu_option next_comment
ustring 'Tarfiles/Archive Directory' ARCHIVE_DIR "`pwd`/tarfiles"
choice 'Target Platform' \
   "Emuticom_WL11000SA-N            CONFIG_WL11000 \
    Soekris_Engineering_net4511     CONFIG_SOEKRIS \
    ITX/ATX_PC                      CONFIG_ITX"

bool "Bridging Support?"    CONFIG_BUTILS
if [ "$CONFIG_NOTUNNELING" = "" -a \
    "$CONFIG_OPENVPN" = "" -a \
    "$CONFIG_CIPE" = "" ]; then
        define_bool CONFIG_NOTUNNELING y
fi
choice 'Tunneling Support' \
	"None		CONFIG_NOTUNNELING \
	 OpenVPN	CONFIG_OPENVPN	\
	 Cipe		CONFIG_CIPE"
bool "IPTABLES Support?"    CONFIG_IPTABLES

if [ "$CONFIG_ITX" = "y" ]; then
    bool "VGA/PC Keyboard Support?" CONFIG_VGA
fi

if [ "$CONFIG_WL11000" != "y" ]; then
#    mainmenu_option next_comment
#    comment 'CF/Disk Filesystem Options'
        define_bool CONFIG_RAMDISK y
        define_bool CONFIG_SYSLINUX y
        define_bool CONFIG_UMSDOS y
        define_ustring RAMFS './ramfs.img'
        int  'Ramdisk Size'         RAMDISK_SIZE    16384
        bool "Tiny Login?"          CONFIG_TINYLOGIN
        bool "C-Kermit?"            CONFIG_CKERMIT
        bool "QOS/Traffic Control?" CONFIG_TRAFFIC
        choice 'C Library' \
           "uClibc        CONFIG_UCLIBC \
            GNU_Glibc     CONFIG_GLIBC"
        if [ "$CONFIG_UCLIBC" = "y" ]; then
            ustring 'uClibc Version' UCLIBC_VERSION '0.9.17'
        fi
        if [ "$CONFIG_GLIBC" = "y" ]; then
            bool "System V Style Init?"     CONFIG_SYSVINIT
        fi
        bool "HostAP Driver?"   CONFIG_HOSTAP

        if [ "$CONFIG_HOSTAP" = "y" ]; then
            bool "PCI HostAP Driver?"   CONFIG_HOSTAP_PCI
            bool "PCMCIA HostAP Driver?"   CONFIG_HOSTAP_PCMCIA
        fi

        ustring 'Compact Flash Base Device' CF_BASEDEV '/dev/sda'
        ustring 'Compact Flash Mount Point' CF_MOUNTPOINT '/mnt/cf'
#    endmenu
fi

if [ "$CONFIG_WL11000" = "y" ]; then
    define_bool CONFIG_ALIOS y
    define_bool CONFIG_CRAMFS y
    define_bool CONFIG_APTOOLS y
    define_bool CONFIG_UCLIBC y
    define_bool CONFIG_HOSTAP y
    define_bool CONFIG_HOSTAP_PCMCIA y
    define_bool CONFIG_HOSTAP_PCI n
    choice 'Elan Speed Selection' \
   "WL_Normal-Speed         CONFIG_WLSPD_NORMAL \
    WL_Hyper-Speed          CONFIG_WLSPD_HYPER \
    WL_Slow-Speed           CONFIG_WLSPD_SLOW"
fi

if [ "$CONFIG_HOSTAP" = "y" ]; then
    ustring 'Hostap Version' HOSTAP_VERSION HOSTAP_VERSION
fi

ustring 'Kernel Version' KERNEL_VERSION '2.4.20'

bool "NBD/Swap Support?"    CONFIG_NBD

bool "Kernel AODV dynamic routing?" CONFIG_KERNEL_AODV
if [ "$CONFIG_KERNEL_AODV" = "y" ]; then
    ustring 'Kernel AODV Version' KERNEL_AODV_VERSION KERNEL_AODV_VERSION
fi

if [ "$CONFIG_GLIBC" = "y" ]; then
    define_bool CONFIG_PSMISC y
else
    define_bool CONFIG_PSMISC n
fi
endmenu
